name: Hello World

on:
  workflow_dispatch:

jobs:
  build-and-run:
    runs-on: self-hosted
    timeout-minutes: 10

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 1
          lfs: false
          submodules: false

      - name: Verify gcc (UCRT64)
        shell: cmd
        run: |
          "C:\msys64\ucrt64.exe" -lc "gcc --version"

      - name: Compile (UCRT64)
        shell: cmd
        run: |
          "C:\msys64\ucrt64.exe" -lc "cd \"$GITHUB_WORKSPACE\" && gcc -Wall -Wextra -O2 hello_world.c -o hello_world.exe"

      - name: Run
        shell: cmd
        run: |
          cd /d "%GITHUB_WORKSPACE%"
          hello_world.exe
